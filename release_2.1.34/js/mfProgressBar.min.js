
(function(c){var d={PB_DIRECT_LEFT_TO_RIGHT:"lr",PB_DIRECT_RIGHT_TO_LEFT:"rl",PB_DIRECT_BOTTOM_TO_TOP:"bt",PB_DIRECT_TOP_TO_BOTTOM:"tb"};var a={lr:["left","right"],rl:["right","left"],tb:["top","bottom"],bt:["bottom","top"]};mfProgressBar=function(e){this.init(e);return this};mfProgressBar.prototype={element:null,progress:null,progressDuration:1000,progressMon:null,showNumericPos:true,animatePosition:true,precission:0,direction:d.PB_DIRECT_LEFT_TO_RIGHT,_beginDirect:"left",_endDirect:"right",value:0,background:null,init:function(g){try{c.extend(true,this,g);this.$el=c(this.element);this.element.owner=this;if("style" in g){this.element.style.cssText=g.style}if(this.$el.css("position")==="static"){this.$el.css("position","relative")}this.progress=c("<div></div>").css({position:"absolute"}).appendTo(this.element);this.progress.css(this._beginDirect,0);this.background=new b();this.background.owner=this;c.extend(this.background,g.background);this.progressMon=c("<span></span>").css({position:"relative"}).appendTo(this.progress);this.direct(this.direction);if("background" in g&&g.background.animated){this.animateBack(true)}else{this.animateBack(false)}return this}catch(f){console.warn(f)}},getElement:function(){return this.element},setStyle:function(e){this.$el.css(e);return this},doPrecission:function(g){if(arguments.length){try{this.precission=parseInt(g)}catch(f){this.precission=0}}else{return this.precission}this.pr(this.value);return this.precission},doAnimatePosition:function(g){if(arguments.length){try{if(typeof g==="boolean"){this.animatePosition=g}}catch(f){this.animatePosition=true}return this.animatePosition}else{return this.animatePosition}},position:function(h,g){try{if(typeof h!=="number"||h<0||h>100){h=0}if(typeof g==="number"){this.progressDuration=g}if(typeof h==="number"){if(this.animatePosition){this.goTo(parseFloat(h),this.progressDuration)}else{this.value=parseFloat(h);this.goTo(this.value,this.progressDuration)}c(this).trigger("changePos",this.value);return this.value}else{return parseFloat(this.value)}}catch(f){}},goTo:function(i,g){var j=this;var e=this.value;i=parseFloat(i);if(this.animatePosition){var f=i-parseFloat(this.value);this.progress.stop();var h={};h[this._endDirect]=this._percentToPx(i);this.progress.animate(h,{queue:false,duration:g,progress:function(k,m,l){j.value=e+(f*m);j.pr(j.value)},done:function(){j.pr(j.value)}})}else{this.progress.get(0).style[this._endDirect]=this._percentToPx(i);this.pr(this.value)}return this},pr:function(e){if(this.showNumericPos){var f=this.precission>0?Math.pow(10,this.precission):1;var g=(Math.floor(e*f)/f).toFixed(this.precission)+"%";this.progressMon.html(g);this.monPos()}},_percentToPx:function(f){if(this._isHorizontal()){var e=this.$el.width()}if(this._isVertical()){var e=this.$el.height()}return e-(e/100*f)+"px"},_isVertical:function(){return this.direction===d.PB_DIRECT_BOTTOM_TO_TOP||this.direction===d.PB_DIRECT_TOP_TO_BOTTOM},_isHorizontal:function(){return this.direction===d.PB_DIRECT_LEFT_TO_RIGHT||this.direction===d.PB_DIRECT_RIGHT_TO_LEFT},direct:function(g){try{if(g){this.direction=g;this._beginDirect=a[this.direction][0];this._endDirect=a[this.direction][1];this.$el.removeClass("horizontal vertical");this.progress.get(0).style.top="";this.progress.get(0).style.right="";this.progress.get(0).style.bottom="";this.progress.get(0).style.left="";if(this._isHorizontal()){this.$el.addClass("horizontal")}if(this._isVertical()){this.$el.addClass("vertical")}this.progress.get(0).style[this._beginDirect]=0;this.position(this.value);this.animateBack(this.background.animated);return this}else{return this.direction}}catch(f){console.dir(f)}},monPos:function(){var e=(this.progress.width()/2)-(this.progressMon.width()/2);var f=(this.progress.height()/2)-(this.progressMon.height()/2);this.progressMon.get(0).style.left=e+"px";this.progressMon.get(0).style.top=f+"px"},animateBack:function(g){if(arguments.length){try{switch(g){case true:return this.background.animateOn();break;case false:return this.background.animateOff();break}}catch(f){return this.background.animateOff()}}else{return this.background.animated}}};var b=function(){return{owner:null,hndl:null,animated:false,pos:0,size:200,duration:10,animateOn:function(){this.animated=true;this._doAnimate();return this.animated},animateOff:function(){this.animated=false;this._stopAnimate()},_doAnimate:function(){this._stopAnimate();var g=this;try{this.hndl=setInterval(function(){g._render()},this.duration)}catch(f){console.error(f)}},_stopAnimate:function(){clearInterval(this.hndl)},_render:function(){switch(this.owner.direction){case d.PB_DIRECT_TOP_TO_BOTTOM:case d.PB_DIRECT_LEFT_TO_RIGHT:++this.pos;break;case d.PB_DIRECT_BOTTOM_TO_TOP:case d.PB_DIRECT_RIGHT_TO_LEFT:--this.pos;break}switch(this.owner.direction){case d.PB_DIRECT_LEFT_TO_RIGHT:if(this.pos>this.size){this.pos=0}this.owner.progress.css("background-position",this.pos+"px 0");break;case d.PB_DIRECT_RIGHT_TO_LEFT:if(this.pos<0){this.pos=this.size}this.owner.progress.css("background-position",this.pos+"px 0");break;case d.PB_DIRECT_TOP_TO_BOTTOM:if(this.pos>this.size){this.pos=0}this.owner.progress.css("background-position","0 "+this.pos+"px");break;case d.PB_DIRECT_BOTTOM_TO_TOP:if(this.pos<0){this.pos=this.size}this.owner.progress.css("background-position","0 "+this.pos+"px");break}}}};c.fn.mfProgressBar=function(){function k(l){for(var e in l){return false}return true}try{var g=this;var f=arguments;if(!f.length){f={}}var h=null;var j=null;this.each(function(){try{if(typeof f==="object"&&!("owner" in this)){f[0].element=this;f[0].name="progressbar_"+arguments[0];var l=new mfProgressBar(f[0])}}catch(n){console.warn(n)}try{if(typeof f[0]==="string"&&(f[0] in mfProgressBar||f[0] in mfProgressBar.prototype)){if(!h){h=f[0]}if(!j){j=Array.prototype.slice.call(f,1)}var m=this.owner;if("function"===typeof mfProgressBar.prototype[f[0]]){g=m[h].apply(m,j);return g}}}catch(n){console.warn(n)}})}catch(i){console.error(i)}return g}})(jQuery);